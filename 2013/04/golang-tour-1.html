<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Go语言之旅——基本概念（一）</title>
  
    <meta name="author" content="Gao Xu">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">Gavin Droider</a>
          <ul class="nav">
            
              


  <li><a href="/archive">Archive</a></li>


            
              


  <li><a href="/tags">Tags</a></li>


            
              


  <li><a href="/categories">Categories</a></li>


            
              


  <li><a href="/pages">Pages</a></li>


            
              


  <li><a href="/about">About Me</a></li>


            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        <div class="page-header">
  <h1>Go语言之旅——基本概念（一） </h1>
</div>

<div class="row">
  <div class="span8">
    <p>##第一个程序
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func main(){
    fmt.Println(&ldquo;Hello,world!&rdquo;)
}</code></pre>
最开始的package语句不能省略；语句后不必有分号。<br />
go语言支持中文，不过文本编码必须时UTF-8无BOM格式，否则编译错误，切记。
##包：
每一个Go程序都由包组成，并且程序运行的入口包是main。<br />
按照惯例，包名与导入路径的最后一个目录相同。<br />
下面的例子中导入了两个包：<br />
<pre><code>package main</p>

<p>import(
    &ldquo;fmt&rdquo;
    &ldquo;math&rdquo;
)</p>

<p>func main(){
    fmt.Println(&ldquo;Happy&rdquo;,math.Pi,&ldquo;Day&rdquo;,&ldquo;Gavin&rdquo;)
}</code></pre>
导入需要的包时，既可以像上面那样将需要导入的包用括号括起来，也可以使用多条import语句：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;
import &ldquo;math&rdquo;</p>

<p>func main(){
    fmt.Println(&ldquo;Now you have %g problems.&rdquo;,math.Nextafter(2,3))
}</code></pre>
在导入一个包后，就可以引用它导出的名称。在Go中，导出的名字必须以大写字母开头。<br />
下面是一个例子，math.pi不是导出的名字，改为Pi再试一下：
<pre><code>package main</p>

<p>import(
    &ldquo;fmt&rdquo;
    &ldquo;math&rdquo;
)</p>

<p>func main(){
    fmt.Println(math.pi)
}</code></pre>
报错信息：
<pre><code>.\exportednames.go:9: cannot refer to unexported name math.pi
.\exportednames.go:9: undefined: math.pi</code></pre>
##函数
Go中的函数可以有0个或多个参数。在下面的例子中，add函数有两个int类型的参数，注意类型在变量名的后面：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func add(x int, y int) int{
    return x + y;
}</p>

<p>func main(){
    fmt.Println(add(3,4));
}</code></pre>
当函数参数中连续几个属于同一个类型时，可以省略前面几个参数的类型，只保留最后一个参数的类型。例如上例中
<pre><code>x int, y int</code></pre>
可以写为：
<pre><code>x, y int</code></pre>
一个函数可以有任意数目的返回值。下面的例子中，函数swap返回了两个string：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func swap(x, y string)(string ,string){
    return y,x
}</p>

<p>func main(){
    a, b := swap(&ldquo;Gavin&rdquo;,&ldquo;fleischer&rdquo;);
    fmt.Println(a,b)
}</code></pre>
在Go中，可以像变量一样对函数的返回值命名，此时return语句不用带任何返回值：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func split(sum int)(x , y int){
    x = sum * 4 / 9
    y = sum - x
    return
}</p>

<p>func main(){
    fmt.Println(split(17))
}</code></pre>
##变量
使用var语句声明一个变量的列表，与函数参数列表一样，类型在变量名后面。
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>var x,y,z int
var c,python,java bool</p>

<p>func main(){
    fmt.Println(x,y,z,c,python,java)
}</code></pre>
var语句可以初始化每一个变量，初始化时，可以省略变量的类型。
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;
var x, y, z int = 1, 2, 3
var c, python, java = true, false, &ldquo;no!&rdquo;</p>

<p>func main(){
    fmt.Println(x, y, z, c, python, java)
}</code></pre>
在函数体内可以使用:=短赋值语句替换var进行隐式声明。
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func main(){
    var x, y, z int = 1, 2, 3
    c, python, java := true, false, &ldquo;no!&rdquo;
    fmt.Println(x, y, z, c, python, java)
}</code></pre>
隐式声明不能在函数体外进行，因为外部的语句块都以一个关键字开头。
##Go的基本数据类型：
Go的基本数据类型有：
<pre><code>bool
string
int int8 int16 int32 int64
uint uint8 uint16 uint32 uint64 uintptr
byte //uint8的别名
rune //int32的别名，表示一个Unicode代码点
float32 float64
complex64 complex128</code></pre>
示例：
<pre><code>package main</p>

<p>import (
    &ldquo;fmt&rdquo;
    &ldquo;math/cmplx&rdquo;
)</p>

<p>var (
    ToBe bool = false
    MaxInt uint64 = 1&lt;&lt;64 - 1
    z complex128 = cmplx.Sqrt(-5 + 12i)
)</p>

<p>func main() {
    const f = &ldquo;%T(%v)\n&rdquo;
    fmt.Printf(f, ToBe, ToBe)
    fmt.Printf(f, MaxInt, MaxInt)
    fmt.Printf(f, z, z)
}</code></pre>
##常量
常量声明与变量声明一样，只不过多了const关键字。常量可以是字母、字符串、布尔值或者数值。
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>const Pi = 3.14</p>

<p>func main() {
    const World = &ldquo;世界&rdquo;
    fmt.Println(&ldquo;Hello,&rdquo;,World)
    fmt.Println(&ldquo;Happy,&rdquo;,Pi,&ldquo;Day&rdquo;)</p>

<pre><code>const Truth = true
fmt.Println(&quot;Go rules?&quot;,Truth)
</code></pre>

<p>}</code></pre>
数字常量是高精度值，隐式常量需要根据上下文取得具体类型。
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>const (
    Big = 1 &lt;&lt; 100
    Small = Big &gt;&gt; 99
)</p>

<p>func main() {
    fmt.Println(needInt(Small))
    fmt.Println(needFloat(Small))
    fmt.Println(needFloat(Big))
}</p>

<p>func needInt(x int) int {
    return x*10 +1
}</p>

<p>func needFloat(x float64) float64 {
    return x * 0.1
}</code></pre>
##循环
Go目前只有一种循环结构：for循环。<br />
最基本的for循环与c或java中的很像，除了没有()（这个不能有）以及必须有{}。
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func main() {
    sum := 0
    for i := 0; i &lt; 10; i++ {
        sum += i
    }
    fmt.Println(sum)
}</code></pre>
与c或java一样，可以省略前置和后置语句：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func main() {
    sum := 1
    for ; sum &lt; 1000; {
        sum += sum
    }
    fmt.Println(sum)
}</code></pre>
当前置和后置语句为空时，甚至可以省略分号，使之看起来像c的while循环那样：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func main() {
    sum := 1
    for sum &lt; 1000 {
        sum += sum<br />
    }
    fmt.Println(sum)
}</code></pre>
如果在循环中省略循环条件，那它就是一个最简洁的死循环：
<pre><code>package main</p>

<p>import &ldquo;fmt&rdquo;</p>

<p>func main() {
    for {
    }
}</code></pre>
##if语句
if语句与c或java很像，就是没有()（这个必须不能有）和必须有{}（与for循环一样）。
<pre><code>package main</p>

<p>import (
    &ldquo;fmt&rdquo;
    &ldquo;math&rdquo;
)</p>

<p>func sqrt(x float64) string {
    if x &lt; 0 {
        return sqrt(-x) + &ldquo;i&rdquo;<br />
    }
    return fmt.Sprint(math.Sqrt(x))
}</p>

<p>func main() {
    fmt.Println(sqrt(2), sqrt(-4))
}</code></pre>
与for循环一样，if语句在执行条件之前可以有一个短语句，这个语句中声明的变量作用域只在if语句范围内。
<pre><code>package main</p>

<p>import (
    &ldquo;fmt&rdquo;
    &ldquo;math&rdquo;
)</p>

<p>func pow(x, n, lim float64) float64 {
    if v := math.Pow(x, n); v &lt; lim {
        return v
    }
    return lim
}</p>

<p>func main() {
    fmt.Println(
        pow(3, 2, 10),
        pow(3, 3, 20),
    )
}</code></pre>
在if的简单语句中声明的变量同样可以在任何对应的else语句块中使用：
<pre><code>package main</p>

<p>import (
    &ldquo;fmt&rdquo;
    &ldquo;math&rdquo;
)</p>

<p>func pow(x, n, lim float64) float64 {
    if v := math.Pow(x, n); v &lt; lim {
        return v
    } else {
            fmt.Printf(&ldquo;%g &gt;= %g\n&rdquo;, v, lim)
    }
    return lim
}</p>

<p>func main() {
    fmt.Println(
        pow(3, 2, 10),
        pow(3, 3, 20),
    )
}</code></pre></p>

    <hr>
    <div class="pagination">
      <ul>
        <ul>
          
            <li class="prev"><a href="/2013/04/golang-tour-2.html" title="Go语言之旅——基本概念（二）">&larr; Previous</a></li>
          
          

            <li><a href="/archive">Archive</a></li>

          
            <li class="next"><a href="/2013/03/android-lint.html" title="android之lint">Next &rarr;</a></li>
          
          
        </ul>
      </ul>
    </div>
    <hr>
    
<div id="disqus_thread"></div>
<script>
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>2013-04-16 22:52:51</span></div>
    <br>
    <h4>Categories</h4>
    <ul class="tag_box">
    
      <li>
  <a href="/categories/#Go-ref">Go <span>17</span></a>
</li>
    
    </ul>
    <br>
    <h4>Tags</h4>
    <ul class="tag_box">
    
      <li>
  <a href="/tags/#Go-ref">Go <span>16</span></a>
</li>
    
      <li>
  <a href="/tags/#tour-ref">tour <span>1</span></a>
</li>
    
    </ul>
  </div>
</div>

      </div>

      <footer>
        <p>&copy; Gao Xu 2013 
          with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
		  and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>

    
<script>
    var _gaq=[['_setAccount','UA-123-12'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
  </body>
</html>
